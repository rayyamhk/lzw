const Benchmark = require('benchmark');
const { compress, decompress } = require('../lzw');
const lz = require('lz-string');

const suite = new Benchmark.Suite;
let compressed1, compressed2;
const uncompressed = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Vulputate mi sit amet mauris commodo quis. Adipiscing elit duis tristique sollicitudin nibh sit amet commodo nulla. Ipsum dolor sit amet consectetur. Maecenas ultricies mi eget mauris pharetra et ultrices. Sed id semper risus in hendrerit gravida rutrum quisque non. Id venenatis a condimentum vitae sapien pellentesque habitant morbi tristique. Sollicitudin nibh sit amet commodo nulla facilisi nullam. In nisl nisi scelerisque eu ultrices vitae auctor eu. Arcu vitae elementum curabitur vitae nunc sed velit dignissim. Mattis nunc sed blandit libero volutpat sed cras ornare arcu. Euismod elementum nisi quis eleifend. Enim sed faucibus turpis in eu mi bibendum. Quis varius quam quisque id diam. Tristique sollicitudin nibh sit amet commodo nulla facilisi nullam. Pharetra magna ac placerat vestibulum lectus mauris ultrices eros. Nibh cras pulvinar mattis nunc sed blandit libero volutpat sed. Convallis tellus id interdum velit laoreet id. Eros donec ac odio tempor. Volutpat commodo sed egestas egestas fringilla. Commodo elit at imperdiet dui accumsan sit amet nulla. Egestas purus viverra accumsan in nisl nisi scelerisque eu ultrices. Suscipit adipiscing bibendum est ultricies integer quis auctor elit. Fermentum iaculis eu non diam phasellus vestibulum lorem. Magna etiam tempor orci eu lobortis elementum nibh. Vitae semper quis lectus nulla at volutpat diam ut venenatis. Sollicitudin ac orci phasellus egestas tellus. Lectus quam id leo in vitae turpis. Ultricies integer quis auctor elit sed vulputate mi sit. A pellentesque sit amet porttitor eget dolor morbi. Cras sed felis eget velit aliquet sagittis id consectetur purus. Nunc aliquet bibendum enim facilisis gravida neque convallis a. Vitae suscipit tellus mauris a diam maecenas sed. Molestie ac feugiat sed lectus vestibulum. Elit pellentesque habitant morbi tristique senectus et netus. Nibh sit amet commodo nulla facilisi nullam vehicula ipsum. Viverra adipiscing at in tellus integer feugiat scelerisque varius morbi. Egestas quis ipsum suspendisse ultrices gravida. Quisque sagittis purus sit amet. Et leo duis ut diam. Viverra nam libero justo laoreet sit amet. Placerat in egestas erat imperdiet sed euismod nisi. Enim ut sem viverra aliquet eget sit amet. Sapien pellentesque habitant morbi tristique senectus et netus et malesuada. Elementum tempus egestas sed sed risus pretium quam vulputate. Egestas erat imperdiet sed euismod nisi porta. Pharetra pharetra massa massa ultricies mi quis hendrerit dolor. Blandit libero volutpat sed cras ornare arcu dui vivamus. Morbi tincidunt ornare massa eget egestas purus viverra. Enim nulla aliquet porttitor lacus luctus accumsan tortor posuere ac. Sed lectus vestibulum mattis ullamcorper. Eget velit aliquet sagittis id consectetur purus ut faucibus pulvinar. Commodo viverra maecenas accumsan lacus. Vel facilisis volutpat est velit egestas dui id ornare. Ac tortor dignissim convallis aenean. Turpis nunc eget lorem dolor sed viverra ipsum. Sit amet mauris commodo quis imperdiet massa tincidunt nunc. Bibendum neque egestas congue quisque egestas diam. Diam ut venenatis tellus in metus vulputate eu scelerisque felis. Metus dictum at tempor commodo ullamcorper a. Mauris rhoncus aenean vel elit scelerisque mauris pellentesque. Eget mi proin sed libero enim sed faucibus. Ut faucibus pulvinar elementum integer enim neque volutpat ac. Lorem sed risus ultricies tristique. Sit amet nisl purus in mollis nunc sed id. Et pharetra pharetra massa massa. Elementum facilisis leo vel fringilla est ullamcorper eget. Eget magna fermentum iaculis eu non diam. A pellentesque sit amet porttitor eget dolor morbi non. Pellentesque id nibh tortor id aliquet lectus. Vulputate sapien nec sagittis aliquam malesuada bibendum arcu vitae elementum. Venenatis urna cursus eget nunc scelerisque. Turpis tincidunt id aliquet risus feugiat in ante metus. Porttitor rhoncus dolor purus non enim praesent elementum. Sodales neque sodales ut etiam sit amet. Adipiscing diam donec adipiscing tristique risus nec. Eu mi bibendum neque egestas congue quisque egestas diam in. Mauris commodo quis imperdiet massa tincidunt nunc pulvinar sapien. Interdum velit euismod in pellentesque massa. Arcu dictum varius duis at consectetur lorem. Amet facilisis magna etiam tempor orci eu lobortis elementum. A diam sollicitudin tempor id. Consectetur libero id faucibus nisl tincidunt eget nullam non nisi. Aenean vel elit scelerisque mauris pellentesque. Arcu risus quis varius quam quisque. Sit amet facilisis magna etiam tempor orci. Ut sem viverra aliquet eget sit. Maecenas accumsan lacus vel facilisis. Consectetur libero id faucibus nisl tincidunt. Et ultrices neque ornare aenean. Diam sit amet nisl suscipit adipiscing bibendum est ultricies. Pellentesque nec nam aliquam sem. Mauris augue neque gravida in fermentum et. Orci dapibus ultrices in iaculis nunc sed augue. Amet venenatis urna cursus eget nunc scelerisque viverra mauris in. Et leo duis ut diam. Aenean pharetra magna ac placerat. Nibh cras pulvinar mattis nunc. Convallis a cras semper auctor neque vitae. Tortor dignissim convallis aenean et tortor. Vel pretium lectus quam id. Arcu vitae elementum curabitur vitae nunc sed velit dignissim sodales. Amet consectetur adipiscing elit ut aliquam. Id aliquet risus feugiat in ante. Tempus urna et pharetra pharetra. Vitae elementum curabitur vitae nunc sed velit dignissim sodales ut. Velit laoreet id donec ultrices tincidunt arcu non. Parturient montes nascetur ridiculus mus mauris vitae ultricies. Augue interdum velit euismod in pellentesque. Netus et malesuada fames ac turpis egestas maecenas pharetra convallis. Id donec ultrices tincidunt arcu. In hendrerit gravida rutrum quisque non. Fames ac turpis egestas sed tempus urna et pharetra pharetra. Non nisi est sit amet facilisis magna etiam tempor orci. Velit ut tortor pretium viverra suspendisse potenti nullam ac. Ridiculus mus mauris vitae ultricies leo integer malesuada nunc. Dolor sit amet consectetur adipiscing elit. Dui ut ornare lectus sit amet. A erat nam at lectus urna. Pellentesque habitant morbi tristique senectus et. Tristique risus nec feugiat in fermentum. Amet cursus sit amet dictum sit amet. Morbi tristique senectus et netus et malesuada fames ac. Pellentesque habitant morbi tristique senectus. Orci a scelerisque purus semper eget. Velit ut tortor pretium viverra suspendisse potenti nullam. Integer feugiat scelerisque varius morbi. Mauris in aliquam sem fringilla ut morbi. Et ligula ullamcorper malesuada proin libero nunc consequat interdum. Sit amet tellus cras adipiscing enim eu turpis egestas. Cras sed felis eget velit aliquet. Pellentesque habitant morbi tristique senectus et netus et malesuada fames. Tincidunt eget nullam non nisi. A cras semper auctor neque. Donec massa sapien faucibus et molestie ac feugiat. Malesuada fames ac turpis egestas integer eget aliquet nibh. Aliquam sem fringilla ut morbi tincidunt augue interdum velit euismod.';

suite
  .add('my compress', () => {
    compressed1 = compress(uncompressed);
  })
  .add('lz-string compress', () => {
    compressed2 = lz.compressToBase64(uncompressed);
  })
  .add('my decompress', () => {
    decompress(compressed1);
  })
  .add('lz-string decompress', () => {
    lz.decompressFromBase64(compressed2);
  })
  .on('cycle', function(event) {
    console.log(String(event.target));
  })
  .run({ 'async': true });